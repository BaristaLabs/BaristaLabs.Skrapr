{
  "name": "Tori Richard Shirts",
  "startUrls": [
    "http://www.toririchard.com"
  ],
  "rules": [
    {
      "type":  "UrlPattern",
      "urlPattern": "^http://www.toririchard.com/?$",
      "tasks": [
        {
          "name": "ClickDomElement",
          "selector": ".MENS",
          "isNavigation": true
        },
        {
          "name": "AddCurrentPageAsTarget"
        }
      ]
    },
    {
      "type": "UrlPattern",
      "urlPattern": "^http://www.toririchard.com/mens$",
      "tasks": [
        {
          "name": "ClickDomElement",
          "selector": "#sidebar li:nth-of-type(2) a",
          "isNavigation": true
        },
        {
          "name": "AddCurrentPageAsTarget"
        }
      ]
    },
    {
      "type": "UrlPattern",
      "urlPattern": "^http://www.toririchard.com/mens-shirts.*$",
      "tasks": [
        {
          "name": "ClickDomElement",
          "selector": ".viewall-link",
          "condition": "document.getElementsByClassName('viewall-link').length > 0",
          "isNavigation": true
        },
        {
          "name": "AddAnchorsAsTargets",
          "selector": ".thumb-grid a.name",
          "disabled": true
        },
        {
          "name": "TemplatedSubFlow",
          "selector": ".thumb-grid a.name",
          "shuffle": true,
          //Navigate to each shirt page.
          "taskTemplates": [
            {
              "name": "Navigate",
              "url": "{{href}}",
              "referrer": "{{$url}}"
            },
            {
              "name": "Assert",
              "assertion": "document.location.toString() === '{{href}}'",
              "message": "Expected current url to be {{href}}"
            }
          ]
        }
      ]
    }
  ],
  "schedules": [
    {
      "type": "cron",
      "expression": "5 * * * *"
    }
  ]
}